{% extends "motorparts/base.html" %}
{% block title %}Serial Lookup{% endblock %}
{% block content %}

<h2 class="mb-4">Search for Serial Number</h2>

<form method="get" action="{% url 'serial_lookup' %}" class="mb-4">
    <div class="input-group">
        <select name="serial" class="form-select" required>
            <option value="">Select a serial number...</option>
            {% for serial_obj in all_serials %}
                <option value="{{ serial_obj.serial }}" {% if serial == serial_obj.serial %}selected{% endif %}>
                    {{ serial_obj.serial }}
                </option>
            {% endfor %}
        </select>
        <button type="submit" class="btn btn-primary">Search</button>
    </div>
</form>

{% if serial %}
    <h3 class="mb-3">Results for: <span class="text-primary">{{ serial }}</span></h3>
    <div class="mb-3">
        <a href="{% url 'parts_pricing' serial %}" class="btn btn-success">
            ðŸ“Š View Parts Pricing Summary
        </a>
    </div>
{% endif %}

{% if parent_titles %}
    <ul class="list-group">
        {% for parent in parent_titles %}
            <li class="list-group-item">
                <a href="{% url 'parent_detail' parent.id %}">{{ parent.title }}</a>
            </li>
        {% endfor %}
    </ul>
{% elif serial %}
    <div class="alert alert-warning">No parent titles found for this serial.</div>
{% endif %}

{% endblock %}
